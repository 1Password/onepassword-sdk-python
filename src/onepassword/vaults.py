# Code generated by op-codegen - DO NO EDIT MANUALLY

from .core import Core
from typing import Optional, List
from pydantic import TypeAdapter
from .types import (
    Vault,
    VaultGetParams,
    VaultListParams,
    VaultOverview,
)


class Vaults:
    """
    The Vaults API holds all the operations the SDK client can perform on 1Password vaults.
    """

    def __init__(self, client_id, core: Core):
        self.client_id = client_id
        self.core = core

    async def list(self, params: Optional[VaultListParams] = None) -> List[VaultOverview]:
        """
        List information about vaults that's configurable based on some input parameters.
        """
        response = await self.core.invoke(
            {
                "invocation": {
                    "clientId": self.client_id,
                    "parameters": {
                        "name": "VaultsList",
                        "parameters": {"params": params.model_dump(by_alias=True) if params else None},
                    },
                }
            }
        )

        response = TypeAdapter(List[VaultOverview]).validate_json(response)
        return response

    async def get_overview(self, vault_uuid: str) -> VaultOverview:
        response = await self.core.invoke(
            {
                "invocation": {
                    "clientId": self.client_id,
                    "parameters": {
                        "name": "VaultsGetOverview",
                        "parameters": {"vault_uuid": vault_uuid},
                    },
                }
            }
        )

        response = TypeAdapter(VaultOverview).validate_json(response)
        return response

    async def get(self, vault_uuid: str, vault_params: VaultGetParams) -> Vault:
        response = await self.core.invoke(
            {
                "invocation": {
                    "clientId": self.client_id,
                    "parameters": {
                        "name": "VaultsGet",
                        "parameters": {
                            "vault_uuid": vault_uuid,
                            "vault_params": vault_params.model_dump(by_alias=True),
                        },
                    },
                }
            }
        )

        response = TypeAdapter(Vault).validate_json(response)
        return response
